import{X as N,G as p,r as d,j as e,e as v,h as k,C as j,I as i,k as w,D as E}from"./react-sWiKbk-Z.js";import{B as C}from"./BaseDrawer-BkvK-6Gl.js";import"./inertia-Dgc5Zg7U.js";import"./axios-ngrFHoWO.js";import"./vendor-Z5AVMo_k.js";const U=({show:l,onHide:c,roles:m})=>{const{props:s}=N(),{data:t,setData:n,post:b,processing:f,errors:_,reset:u,clearErrors:o,isDirty:h}=p({id:null,first_name:"",last_name:"",email:"",username:"",phone_number:"",password:"",credits:0,current_role:null,current_rank:null});d.useEffect(()=>{const a=s.user;a&&l&&(n(r=>({...r,id:a.id,first_name:a.first_name,last_name:a.last_name,email:a.email,username:a.username,phone_number:a.phone_number||"",credits:a.credits,current_role:a.current_role,current_rank:a.current_rank,password:""})),o())},[s.user,l]),d.useEffect(()=>{if(!l){const a=setTimeout(()=>{u(),o()},400);return()=>clearTimeout(a)}},[l]),d.useEffect(()=>{t.transform&&t.transform(a=>{const r={...a};return r.password||delete r.password,r})},[]);const{transform:g}=p({});return e.jsx(y,{show:l,onHide:c,roles:m,userProp:s.user})},y=({show:l,onHide:c,roles:m,userProp:s})=>{const{data:t,setData:n,post:b,processing:f,errors:_,reset:u,clearErrors:o,isDirty:h,transform:g}=p({id:null,first_name:"",last_name:"",email:"",username:"",phone_number:"",password:"",credits:0,current_role:null,current_rank:null});d.useEffect(()=>{s&&l&&(n(r=>({...r,id:s.id,first_name:s.first_name,last_name:s.last_name,email:s.email,username:s.username,phone_number:s.phone_number||"",credits:s.credits,current_role:s.current_role,current_rank:s.current_rank,password:""})),o())},[s,l]),d.useEffect(()=>{if(!l){const r=setTimeout(()=>{u(),o()},400);return()=>clearTimeout(r)}},[l]);const a=()=>{g(r=>{const x={...r};return x.password||delete x.password,x}),b("/administrador/usuarios/update/",{onSuccess:()=>{c(),o(),u()}})};return e.jsx(C,{show:l,onHide:c,title:"Editar Usuario",subtitle:"Actualiza los datos del usuario",icon:"pi pi-user-edit",confirmLabel:"Actualizar Usuario",loading:f,disabled:!h||!t.first_name||!t.last_name||!t.email,onConfirm:a,children:e.jsxs("main",{className:"py-4 sm:py-6 relative",children:[f&&e.jsx("div",{className:"absolute inset-0 bg-slate-100/50 dark:bg-slate-900/50 z-10 flex items-center justify-center backdrop-blur-sm",children:e.jsx(v,{strokeWidth:"4",animationDuration:".5s",style:{width:"50px",height:"50px"}})}),e.jsx(k,{in:l,timeout:500,classNames:"fade-slide",appear:!0,unmountOnExit:!0,children:e.jsxs("form",{onSubmit:r=>{r.preventDefault(),a()},className:"space-y-6",children:[e.jsx(j,{className:"shadow-xl rounded-2xl border border-slate-200 dark:border-slate-700 hover:shadow-lg transition-shadow duration-300",title:e.jsxs("div",{className:"flex items-center gap-3 text-lg font-bold text-slate-700 dark:text-slate-200",children:[e.jsx("i",{className:"pi pi-id-card text-blue-500"}),e.jsx("span",{children:"Datos Personales"})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 mt-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"first_name",className:"text-slate-600 dark:text-slate-300 font-semibold",children:"Nombre"}),e.jsx(i,{id:"first_name",value:t.first_name||"",onChange:r=>n("first_name",r.target.value),className:"w-full rounded-lg border border-slate-300 dark:border-slate-700 p-3 focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-colors duration-200",placeholder:"Ej: Roberto"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"last_name",className:"text-slate-600 dark:text-slate-300 font-semibold",children:"Apellido"}),e.jsx(i,{id:"last_name",value:t.last_name||"",onChange:r=>n("last_name",r.target.value),className:"w-full rounded-lg border border-slate-300 dark:border-slate-700 p-3 focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-colors duration-200",placeholder:"Ej: Gonzalex"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"phone_number",className:"text-slate-600 dark:text-slate-300 font-semibold",children:"Número de Teléfono"}),e.jsx(i,{id:"phone_number",value:t.phone_number||"",onChange:r=>n("phone_number",r.target.value),className:"w-full rounded-lg border border-slate-300 dark:border-slate-700 p-3 focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-colors duration-200",placeholder:"Ej: 999999999"})]})]})}),e.jsx(j,{className:"shadow-xl rounded-2xl border border-slate-200 dark:border-slate-700 hover:shadow-lg transition-shadow duration-300",title:e.jsxs("div",{className:"flex items-center gap-3 text-lg text-slate-700 dark:text-slate-200",children:[e.jsx("i",{className:"pi pi-cog text-blue-500"}),e.jsx("span",{children:"Configuración de la Cuenta"})]}),children:e.jsx("div",{className:"space-y-10 mt-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 mt-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"email",className:"text-slate-600 dark:text-slate-300 font-semibold",children:"Correo Electrónico"}),e.jsx(i,{id:"email",type:"email",value:t.email||"",onChange:r=>n("email",r.target.value),className:"w-full rounded-lg border border-slate-300 dark:border-slate-700 p-3 focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-colors duration-200",placeholder:"Ej: correo@email.com"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"username",className:"text-slate-600 dark:text-slate-300 font-semibold",children:"Nombre de usuario"}),e.jsx(i,{id:"username",value:t.username||"",onChange:r=>n("username",r.target.value),className:"w-full rounded-lg border border-slate-300 dark:border-slate-700 p-3 focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-colors duration-200",placeholder:"Ej: username"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"password",className:"text-slate-600 dark:text-slate-300 font-semibold",children:"Contraseña"}),e.jsx(Password,{id:"password",value:t.password||"",onChange:r=>n("password",r.target.value),toggleMask:!0,inputClassName:"w-full rounded-lg border border-slate-300 dark:border-slate-700 p-3 focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-colors duration-200",className:"w-full",placeholder:"Ej: contraseña"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"credits",className:"text-slate-600 dark:text-slate-300 font-semibold",children:"Creditos"}),e.jsx(w,{id:"credits",value:t.credits,onValueChange:r=>n("credits",r.value),min:0,inputClassName:"w-full rounded-lg border border-slate-300 dark:border-slate-700 p-3 focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-colors duration-200",placeholder:"Ej: 10"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-500 dark:text-slate-400 mb-2",children:"Rol"}),e.jsx(E,{value:t.current_role,options:m,optionLabel:"name",optionValue:"id",onChange:r=>n("current_role",r.value),className:"w-full"})]})]})})})]})})]})})};export{U as default};
