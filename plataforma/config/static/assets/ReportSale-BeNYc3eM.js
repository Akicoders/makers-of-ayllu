import{j as e,S as b,B as g,e as k,D as i,p as c}from"./react-sWiKbk-Z.js";import{A as w}from"./AppLayout-BJnk0JD9.js";import{E as y}from"./EnhancedDataTable-BPwqwYJ3.js";import{u as N}from"./useExcelDownload-TVslJZpk.js";import"./inertia-Dgc5Zg7U.js";import"./axios-ngrFHoWO.js";import"./vendor-Z5AVMo_k.js";import"./app-DEFaNKxM.js";const F=({sales:n,users:m,packages:x})=>{const{downloading:d,downloadUrl:u,downloadFilename:p,exportExcel:h,downloadExcel:j}=N(),f=[{key:"cliente",title:"CLIENTE"},{key:"paquete",title:"PAQUETE"},{key:"credits",title:"CRÃ‰DITOS"},{key:"fecha",title:"FECHA"}],v=["credits","fecha"];return e.jsxs(w,{children:[e.jsx(b,{title:"Reporte de Ventas"}),e.jsxs("div",{className:"p-4 md:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Reporte de Ventas"}),e.jsx(g,{icon:"pi pi-file-excel",label:"Exportar Excel",severity:"success",loading:d,onClick:()=>h("/vendedor/ventas/reporte/export/",n.filters||{})})]}),d&&e.jsx("div",{className:"absolute inset-0 bg-slate-100/50 dark:bg-slate-900/50 z-10 flex items-center justify-center backdrop-blur-sm",children:e.jsx(k,{strokeWidth:"4",animationDuration:".5s",style:{width:"50px",height:"50px"}})}),u&&e.jsxs("div",{className:"p-4 bg-green-50 text-green-600 rounded-lg mb-4 mt-4 flex items-center",children:[e.jsx("i",{className:"pi pi-check-circle mr-2"}),e.jsx("span",{children:"Archivo listo:"}),e.jsxs("button",{className:"font-bold underline ml-2",onClick:j,children:["Descargar ",p]})]}),e.jsx(y,{data:n,headers:f,sortableColumns:v,routeSearch:"/vendedor/ventas/reporte/",placeholderSearch:"Buscar por cliente o correo...",renderFilters:(s,l,o)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-slate-700 dark:text-slate-300",children:"Usuario"}),e.jsx(i,{value:s.user_id,options:m,optionLabel:"name",optionValue:"id",placeholder:"Todos",showClear:!0,className:"w-full",onChange:t=>{l("user_id",t.value),setTimeout(()=>o(),0)}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-slate-700 dark:text-slate-300",children:"Paquete"}),e.jsx(i,{value:s.package_id,options:x,optionLabel:"name",optionValue:"id",placeholder:"Todos",showClear:!0,className:"w-full",onChange:t=>{l("package_id",t.value),setTimeout(()=>o(),0)}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-slate-700 dark:text-slate-300",children:"Desde"}),e.jsx(c,{value:s.date_from?new Date(s.date_from):null,onChange:t=>{const a=t.value;if(a&&!Array.isArray(a)){const r=a.toISOString().split("T")[0];l("date_from",r),setTimeout(()=>o(),0)}else l("date_from",null),setTimeout(()=>o(),0)},dateFormat:"yy-mm-dd",showIcon:!0,className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-slate-700 dark:text-slate-300",children:"Hasta"}),e.jsx(c,{value:s.date_to?new Date(s.date_to):null,onChange:t=>{const a=t.value;if(a&&!Array.isArray(a)){const r=a.toISOString().split("T")[0];l("date_to",r),setTimeout(()=>o(),0)}else l("date_to",null),setTimeout(()=>o(),0)},dateFormat:"yy-mm-dd",showIcon:!0,className:"w-full"})]})]})})]})]})};export{F as default};
