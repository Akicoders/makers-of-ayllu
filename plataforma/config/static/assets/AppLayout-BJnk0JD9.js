import{r as p,j as e,x as N,B as j,y as S,A as k,X as M,h as I,q as _}from"./react-sWiKbk-Z.js";import{g as E}from"./vendor-Z5AVMo_k.js";import{u as y}from"./app-DEFaNKxM.js";const $=()=>{const{toggleMenu:a,toggleDarkMode:c,darkMode:r}=y(),s=p.useRef(null),t=[{items:[{label:"Perfil",icon:"pi pi-user",command:()=>{k.visit("/perfil/")}},{label:"Cerrar sesión",icon:"pi pi-sign-out",command:()=>{k.post("/logout/")}}]}],n=d=>{var o;(o=s.current)==null||o.toggle(d)};return e.jsxs("div",{className:"layout-topbar",children:[e.jsxs("div",{className:"layout-topbar-logo-container",children:[e.jsx("button",{className:"layout-menu-button layout-topbar-action",onClick:a,children:e.jsx("i",{className:"pi pi-bars"})}),e.jsxs(N,{href:"/",className:"layout-topbar-logo",children:[e.jsx("img",{src:"/static/logo.png",alt:"Logo Editorial Atlántico",className:"h-10 w-auto"}),e.jsx("span",{children:"Plataforma"})]})]}),e.jsxs("div",{className:"layout-topbar-actions",children:[e.jsx(j,{type:"button",onClick:c,icon:r?"pi pi-moon":"pi pi-sun",rounded:!0,text:!0,severity:"secondary",tooltip:r?"Dark":"Light"}),e.jsx(j,{type:"button",onClick:n,icon:"pi pi-user",rounded:!0,text:!0,severity:"secondary",tooltip:"Perfil"}),e.jsx(S,{model:t,popup:!0,ref:s})]}),e.jsx("style",{children:`
                /* Personalización adicional del topbar */
                .layout-topbar-logo {
                    display: flex;
                    align-items: center;
                    gap: 0.75rem;
                    transition: transform 0.2s ease;
                }

                .layout-topbar-logo:hover {
                    transform: translateY(-1px);
                }

                .layout-topbar-logo span {
                    font-family: 'Merriweather', Georgia, serif;
                    font-weight: 700;
                    color: var(--brand-dark);
                }

                :root[class*='app-dark'] .layout-topbar-logo span {
                    color: var(--brand-primary);
                }

                .layout-topbar-actions .p-button {
                    color: var(--brand-primary);
                }

                .layout-topbar-actions .p-button:hover {
                    background-color: rgba(14, 191, 207, 0.1);
                }

                :root[class*='app-dark'] .layout-topbar-actions .p-button {
                    color: var(--brand-primary);
                }

                :root[class*='app-dark'] .layout-topbar-actions .p-button:hover {
                    background-color: rgba(14, 191, 207, 0.1);
                }
            `})]})},A=({item:a,index:c,root:r=!0,parentItemKey:s=null})=>{const{activeMenuItem:t,setActiveMenuItem:n,layoutConfig:d,layoutState:o,toggleMenu:m,isSidebarActive:g}=y(),{url:b}=M(),[x,C]=p.useState(!1),u=s?s+"-"+c:String(c),h=p.useRef(null);p.useEffect(()=>{C(t===u||(t?t.startsWith(u+"-"):!1))},[t,u]);const v=(l,i)=>{if(i.disabled){l.preventDefault();return}(i.to||i.url)&&(o.staticMenuMobileActive||o.overlayMenuActive)&&m(),i.command&&i.command({originalEvent:l,item:i});const w=i.items&&x?s:u;n(w)},f=l=>l.to?b.startsWith(l.to):!1;return a.visible===!1?null:e.jsxs("li",{className:`${r?"layout-root-menuitem":""} ${x?"active-menuitem":""}`,children:[r&&a.visible!==!1&&e.jsx("div",{className:"layout-menuitem-root-text text-brand-navy dark:text-brand-gold-light text-xs font-bold tracking-wider",children:a.label}),(!a.to||a.items)&&a.visible!==!1?e.jsxs("a",{href:a.url,onClick:l=>v(l,a),className:`${a.class||""} group hover:bg-brand-cream dark:hover:bg-brand-navy/30`,target:a.target,tabIndex:0,children:[e.jsx("i",{className:`${a.icon} layout-menuitem-icon text-brand-gold group-hover:text-brand-gold-dark transition-colors`}),e.jsx("span",{className:"layout-menuitem-text text-brand-navy-deep dark:text-surface-100",children:a.label}),a.items&&e.jsx("i",{className:"pi pi-fw pi-angle-down layout-submenu-toggler text-brand-gold"})]}):null,a.to&&!a.items&&a.visible!==!1?e.jsxs(N,{href:a.to,onClick:l=>v(l,a),className:`${a.class||""} group hover:bg-brand-cream dark:hover:bg-brand-navy/30 transition-all duration-200 ${f(a)?"active-route bg-brand-gold/10 dark:bg-brand-gold/20 border-l-4 border-brand-gold font-semibold":""}`,tabIndex:0,children:[e.jsx("i",{className:`${a.icon} layout-menuitem-icon transition-colors ${f(a)?"text-brand-gold":"text-brand-gold/70 group-hover:text-brand-gold"}`}),e.jsx("span",{className:`layout-menuitem-text transition-colors ${f(a)?"text-brand-gold":"text-brand-navy-deep dark:text-surface-100"}`,children:a.label}),a.items&&e.jsx("i",{className:"pi pi-fw pi-angle-down layout-submenu-toggler text-brand-gold"})]}):null,a.items&&a.visible!==!1&&e.jsx(I,{nodeRef:h,classNames:"layout-submenu",timeout:300,in:r?!0:x,unmountOnExit:!0,children:e.jsx("ul",{ref:h,className:"layout-submenu",children:a.items.map((l,i)=>e.jsx(A,{item:l,index:i,parentItemKey:u,root:!1},l.label||i))})})]})},R=()=>{const{props:a}=M(),r=(a.auth||{}).modules||[],s=p.useMemo(()=>{const t=[{items:[{label:"Dashboard",icon:"pi pi-home",to:"/dashboard/"}]},{label:"Cuenta",items:[{label:"Perfil",icon:"pi pi-user",to:"/perfil/"}]}],n=r.filter(o=>o.name.endsWith("_admin")).map(o=>{switch(o.name){case"users_admin":return{label:"Gestión de Usuarios",icon:"pi pi-users",to:"/administrador/usuarios/"};case"roles_admin":return{label:"Gestión de Roles",icon:"pi pi-id-card",to:"/administrador/roles/"};default:return null}}).filter(Boolean);n.length&&t.push({label:"Admin",items:n});const d=r.filter(o=>o.name.endsWith("_seller")).map(o=>{switch(o.name){case"customers_seller":return{label:"Gestión de Clientes",icon:"pi pi-users",to:"/vendedor/clientes/"};case"create_sale_seller":return{label:"Crear Venta",icon:"pi pi-shopping-cart",to:"/vendedor/ventas/"};case"report_sale_seller":return{label:"Reporte de Ventas",icon:"pi pi-chart-line",to:"/vendedor/ventas/reporte/"};default:return null}}).filter(Boolean);return d.length&&t.push({label:"Vendedor",items:d}),t},[r]);return e.jsx("ul",{className:"layout-menu",children:s.map((t,n)=>t.separator?e.jsx("li",{className:"menu-separator border-t border-brand-gold-light/20 dark:border-brand-gold/10 my-2"},n):e.jsx(A,{item:t,root:!0,index:n},t.label||n))})},D=()=>e.jsx("div",{className:"layout-sidebar bg-white/95 dark:bg-surface-overlay backdrop-blur-sm border-r border-brand-gold-light/30 dark:border-brand-gold/10",children:e.jsx(R,{})}),L=()=>e.jsxs("div",{className:"layout-footer border-t border-brand-gold-light/30 dark:border-brand-gold/20 bg-white/50 dark:bg-surface-900/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-surface-600 dark:text-surface-400 text-sm",children:[e.jsx("i",{className:"pi pi-code text-brand-gold"}),e.jsx("span",{children:"Desarrollado por"}),e.jsx("a",{href:"https://mantaro-systems.com/",target:"_blank",rel:"noopener noreferrer",className:"link-legal font-bold",children:"Mantaro Systems"})]}),e.jsxs("div",{className:"text-xs text-surface-500 dark:text-surface-500 mt-1",children:["© ",new Date().getFullYear()," Editorial Atlántico EIRL. Todos los derechos reservados."]})]}),G=({children:a})=>{const{layoutConfig:c,layoutState:r,isSidebarActive:s,closeMenu:t,darkMode:n}=y(),d=E("layout-wrapper",{"layout-overlay":c.menuMode==="overlay","layout-static":c.menuMode==="static","layout-static-inactive":r.staticMenuDesktopInactive&&c.menuMode==="static","layout-overlay-active":r.overlayMenuActive,"layout-mobile-active":r.staticMenuMobileActive,"app-dark":n});return p.useEffect(()=>{const o=m=>{const g=document.querySelector(".layout-sidebar"),b=document.querySelector(".layout-menu-button");s&&!(g!=null&&g.contains(m.target))&&!(b!=null&&b.contains(m.target))&&t()};return document.addEventListener("click",o),()=>{document.removeEventListener("click",o)}},[s,t]),e.jsxs("div",{className:d,children:[e.jsx($,{}),e.jsx(D,{}),e.jsxs("div",{className:"layout-main-container",children:[e.jsx("div",{className:"layout-main",children:a}),e.jsx(L,{})]}),s&&e.jsx("div",{className:"layout-mask animate-fadein"}),e.jsx(_,{})]})};export{G as A};
